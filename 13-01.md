# Домашнее задание к занятию "3.1 Компоненты Kubernetes"

## Задание 1 - Расчет ресурсов под кластер:

### - Исходные требования:

1. Необходимо упаковать приложение в чарт для деплоя в разные окружения.
2. База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
3. Кэш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
4. Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий.
5. Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

### - Расчет потребностей:

Минимальные ресурсы на 1 ноду кластера

|              | CPU       | RAM      | HDD     |
|--------------| --------- | -------- | ------- |
| Control Node |   2 core  |     2 ГБ | 50 ГБ   |
| Worker Node  |   1 core  |     1 ГБ | 100 ГБ  |

Необходимые ресурсы для частей проекта

|          |    CPU    |        RAM           |   REPL  |      TOTAL CPU      |             TOTAL RAM         |
|----------|-----------|----------------------|---------|---------------------|-------------------------------|
| БД       | 1         | 4                    | 3       | 3                   | 12                            |
| Кеш      | 1         | 4                    | 3       | 3                   | 12                            |
| Фронтенд | 0,2       | 0,05                 | 5       | 1                   | 0,25                          |
| Бекенд   | 1         | 0,6                  | 10      | 10                  | 6                             |

- Итого требуется:
  - 17 процессоров - Сумма TOTAL CPU
  - 30,25 оперативной памяти - Сумма TOTAL RAM

- Всего с учетом резервирования под 1 дополнительную ноду
  - CPU: 17 + 33% (5,61) = 24 (округлили до большего четного)
  - RAM: 30,25 Гб + 33% (10 Гб)= 42 Гб (округлили до большего четного)

- Ресурсы на 1 ноду:
  - CPU: 24 / 3 = 8 (для нагрузки) + 1 на саму ноду = 9
  - RAM: 42 / 3 = 14 (для нагрузки) + 1 на саму ноду = 15 Гб 

### Резюме - Требуются следующие аппаратные ресурсы:

- 3 рабочие ноды (Worker Node): 9 CPU, 15 RAM
- 3 управляющие ноды (Control Node): 2 CPU, 2 RAM
